#+TITLE:       How to write a graphics application with OpenGL
#+DESCRIPTION: Real-time rasterization made possible using this rendering API
#+DATE:        <2023-01-01>
#+IMAGE:       opengl.png
#+TAGS[]:      opengl graphics cpp

#+NAME: generate-tags
#+BEGIN_SRC emacs-lisp :eval eval :exports results :results raw drawer
(setq tags-string '())
(if (eq org-export-current-backend 'html)
  (progn
    (setq tags-string (append tags-string (list "#+BEGIN_EXPORT html\n")))
    (setq tags-string (append tags-string (list "<div class=\"tags\">")))
    (setq tags-string (append tags-string (list "[ ")))
    (setq tags (split-string (cadar (org-collect-keywords '("TAGS[]"))) " +"))
    (dolist (tag tags)
      (setq tags-string (append tags-string (list (format "<a href=\"/tag/%s.html\">%s</a> " tag tag))))
      )
    (setq tags-string (append tags-string (list "]")))
    (setq tags-string (append tags-string (list "</div>\n")))
    (setq tags-string (append tags-string (list "#+END_EXPORT")))
    (mapconcat #'identity tags-string "") ; flatten string list to a string
  )
  (print "")
)
#+END_SRC
@@html:<div class="tags-date-box">@@
#+RESULTS: generate-tags
:results:
:end:
@@html:<div class="date">@@{{{DATE}}}@@html:</div>@@
@@html:</div>@@
* {{{TITLE}}}
@@html:<h2 class="subtitle">@@{{{keyword(DESCRIPTION)}}}@@html:</h1>@@
@@html:<div class="figure"><img src="@@{{{keyword(IMAGE)}}}@@html:" alt=""></div>@@

OpenGL ipsum dolor sit amet, consetetur sadipscing elitr, sed diam nonumy eirmod
tempor invidunt ut labore et dolore magna aliquyam erat, sed diam voluptua. At
vero eos et accusam et justo duo dolores et ea rebum. Stet clita kasd gubergren,
no sea takimata sanctus est Lorem ipsum dolor sit amet. Lorem ipsum dolor sit
amet, consetetur sadipscing elitr, sed diam nonumy eirmod tempor invidunt ut
labore et dolore magna aliquyam erat, sed diam voluptua. At vero eos et accusam
et justo duo dolores et ea rebum. Stet clita kasd gubergren, no sea takimata
sanctus est Lorem ipsum dolor sit amet.

#+CAPTION: An org-table for OpenGL
#+ATTR_HTML: :border 2 :rules all :frame border :class center
|---------------+---------+--------+---------|
| rendering api | OpenGL  | Vulkan | DirectX |
|---------------+---------+--------+---------|
| linux support | yes     | yes    | no      |
| good          |         | X      | X       |
| thing 3       | depends | n.a.   | windows |
|---------------+---------+--------+---------|

More text here

#+BEGIN_SRC js
var b = 1; // globally-scoped
function exampleVar() {
    var a = 0; // function-scoped (or globally-scoped)
    if (true) {
        var a = 1; // reassigns outer x because of hoisting
        var b = 3; // reassigns outer y (gets "hoisted" to the top of scope)
        c = 3;     // implicitly globally scoped
        let d = 7; // block-scoped
        console.log(a, b, c, d); // Output: 1, 3, 3, 7
    }

    console.log(a, b, c); // Output: 13, 3 (no access to z)
}

exampleVar()
#+END_SRC

#+BEGIN_SRC C
#include <gl.h>
/* multiline
   comment */


#define THING 4
#ifdef THING
  static int a = 4;
#else
  static int a = 8;
#endif
int main()
{
    glProgram("String literal");
    if (a)
    {
        printf("Hello", THING);
    }
}
#+END_SRC

#+BEGIN_SRC cpp
#include <gl.h>

#define THING 4
int main()
{
    // comment here
    std::vector<int> ints;
    glProgram("String literal");
    if (a)
    {
        printf("Hello", THING);
    }
}
#+END_SRC

#+BEGIN_SRC emacs-lisp :var css-file="code.css" :results raw
(defun thing ()
  "Documentation string"
  (unless noninteractive
    (org-html-htmlize-generate-css)
    ;; comment here
    (with-current-buffer "*html*"
      (write-file css-file))
    (format "#+html_head_extra: <link rel=\"stylesheet\" type=\"text/css\" href=\"%s\"/>"
        css-file)) ; comment here
)
#+END_SRC

Hello world example code:
#+BEGIN_SRC python
# Python comment
def hello_world(name):
    print(name)
#+END_SRC
